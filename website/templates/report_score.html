{% extends "layout.html" %}

{% load static %}

{% block head %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="{% url 'js-catlog' %}"></script>
    <script src="{% static '/admin/js/core.js' %}"></script>
    {{ form.media }}
    <link rel="stylesheet" type="text/css" href="{% static 'admin/css/widgets.css' %}" />
    <link rel="stylesheet" href="{% static '/css/form_field.css' %}">
    <title>สรุปคะแนนโครงงาน</title>
    </head>
{% endblock %}

{% block content %}

{% if messages %}
{% for messages in messages %}
<div class="card text-white bg-danger mx-5">
  <div class="card-body text-center">
    {{messages|safe}}
  </div>
</div>
{% endfor %}
{% endif %}
{% comment %} {% if show.std1 is not None %} {% endcomment %}
{% for show in show %}
<div class="col-sm-12 center">
    <div class="card">
      <div class="card-body">
        <div class="card-header">
          <h5 class="card-title">{{show.project}}</h5>
        </div>
        <p class="card-text">
          <table class="table table-borderless">
            <thead>
              <tr style="background-color:#B9C4D8;">
                <th class="col">รายงาน</th>
                <th class="col">คะแนนจากที่ปรึกษา</th>
                <th class="col">คะแนนจากกรรมการ 1</th>
                <th class="col">คะแนนจากกรรมการ 2</th>
                <th class="col">คะแนนรวม</th>
                <th class="col">สรุปคะแนน</th>
              </tr>
            </thead>
            {% for re in re %}
            {% if re.project == show.project %}
            <tbody>
              <tr style="background-color:#E4E7EC;">
                <td>{{re.topic}}</td>
                {% if re.sccon != None %}
                  <td>{{re.sccon}}</td>
                {% else %}
                  <td>ยังไม่ได้ประเมิน</td>
                {% endif %}
                
                {% if re.sccom1 != None %}
                  <td>{{re.sccom1}}</td>
                {% else %}
                  <td>ยังไม่ได้ประเมิน</td>
                {% endif %}

                {% if re.sccom2 != None %}
                  <td>{{re.sccom2}}</td>
                {% else %}
                  <td>ยังไม่ได้ประเมิน</td>
                {% endif %}
        
                {% if re.score != None %}
                  <td>{{re.score}}</td>
                {% else %}
                  <td>ยังไม่ได้สรุป</td>
                {% endif %}
                <td><a href="{% url 'website:avgscore' re.id %}" class="btn btn-primary active text-center" role="button" aria-pressed="true">สรุปคะแนน</a></td>
              </tr>
            </tbody> 
            {% endif %}
          {% endfor%}
          </table>
         
          <table class="table table-borderless">
            <thead>
              <tr style="background-color:#B9C4D8;">
                <th class="col">ภาคเรียน</th>
                <th class="col">สมาชิก</th>
                <th class="col">ที่ปรึกษา</th>
                <th class="col">คะแนนจากที่ปรึกษา</th>
                <th class="col">คะแนนจากกรรมการ 1</th>
                <th class="col">คะแนนจากกรรมการ 2</th>
                <th class="col">คะแนนรวม</th>
                <th class="col">เกรด</th>
              </tr>
            </thead>
            <tbody>
              <tr style="background-color:#E4E7EC;">
                <td>{{show.subject}}</td>
                <td>
                    <p>{{show.std1}}</p>
                    <p>{{show.std2}}</p>
                </td>
                <td>{{show.consult}}</td>
                <td>{{show.consc}}</td>
                <td>{{show.com1sc}}</td>
                <td>{{show.com2sc}}</td>
                <td>{{show.score}}</td>
                {% if show.grade is not None %}
                    <td>{{show.grade}} </td> 
                {% endif %}
              </tr>
            </tbody>
          </table>
        </p>
        {% if user.groups.all.0.name == 'admin' or user.groups.all.0.name == 'coordinator' or user.groups.all.1.name == 'coordinator'%}
        <center>
          <div class="form-group row mt-3">
            <div class="col-sm-11 mx-5">
              <a href="{% url 'website:reportgrade' show.id %}" class="btn btn-primary active text-center" role="button" aria-pressed="true">สรุปเกรด</a>
            </div>
          </div></center>
          {% endif %}
      </div>
    </div>
  </div>
  {% endfor %}
  {% comment %} {% endif %} {% endcomment %}
 

 {% if show.std1 is None %}
 <div class="col-sm-12 center">
     <div class="card">
         <div class="text-center text-danger mt-5 mb-5">
          <br>
          <br>
           <h5 class="card-title"> ยังไม่มีนักศึกษาลงทะเบียน</h5>
           <br>
           <br>
         </div>
     </div>
   </div>
   {% endif %}

{% endblock %}
